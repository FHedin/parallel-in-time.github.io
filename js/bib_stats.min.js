$(document).ready(function(){var toc_html="";$("h2").each(function(){if($(this).attr("id")&&$(this).attr("id").match(/year/g)){toc_html+='<li><a href="#'+$(this).attr("id")+'">'+$(this).clone().children().remove().end().text()+"</a></li>";}});$(".dropdown-menu.years").html(toc_html);$("ol").addClass("list-group");$("ol.bibliography li").addClass("list-group-item");var yc_prelim={};var min_year=9999,max_year=0;$("#total-num-pubs").text("Total number of publications: "+$("li pre.abstract").length);$("#total-num-pubs").addClass("alert alert-info");$("li pre.abstract").each(function(){var abstract_text=$(this).text().toString();var matched=abstract_text.match(/year = .*/g).join("");var year=parseInt(matched.match(/[0-9]+/g).join(""));if(year<min_year){min_year=year;}if(year>max_year){max_year=year;}if(year in yc_prelim){yc_prelim[year]=yc_prelim[year]+1;}else{yc_prelim[year]=1;}});var years=[];var counts=[];var years_counts={};for(var y=min_year;y<=max_year;++y){years.push(y);if(y in yc_prelim){counts.push(yc_prelim[y]);years_counts[y]=yc_prelim[y];}else{counts.push(0);years_counts[y]=0;}}$("ol").each(function(){var count=$(this).children("li").length;$(this).prev("h2").children(".count-stat").addClass("badge").text(count);});Chart.defaults.global.responsive=true;var ctx=$("#pint-pubs-chart").get(0).getContext("2d");var data={labels:years,datasets:[{label:"Number Publications per Year",data:counts}]};var options={scaleBeginAtZero:true,scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:false,barShowStroke:false,barStrokeWidth:0,barValueSpacing:1,barDatasetSpacing:0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};Chart.defaults.global.responsive=false;Chart.defaults.global.maintainAspectRatio=false;Chart.defaults.global.tooltipXOffset=0;Chart.defaults.global.tooltipYOffset=0;var pint_pub_chart=new Chart(ctx).Bar(data,options);$("#stats-buttons").append('<div class="btn-group btn-group-xs" role="group"><button class="btn btn-xs btn-default" data-toggle="collapse" data-target="#chart-raw-data" aria-expanded="false" aria-controls="#chart-raw-data">JSON data of plot</button></div>');$("#chart-raw-data").html("<pre>"+JSON.stringify(years_counts,null,2)+"</pre>");$("#image-download-docu").text("To download the plot and use it in your publications, right-click it. It is licensed under a Creative Commons Attribution 3.0 license.");});